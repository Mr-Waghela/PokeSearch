var totalPokemon,evnum,displayStr="",pokemonNames=[],listItems=document.querySelector("#allListings"),detailsList=document.querySelector("#details"),pokelimit=document.querySelector("#pokeVal"),displayPokemon=document.querySelector("#dspPoke"),SupriseBtn=document.querySelector("#pokeofday"),overlay=document.querySelector(".overlay"),searchBynameTxt=document.querySelector("#searchByname"),datalist=document.querySelector("#datalist"),loadMore=document.querySelector("#loadMore"),nametxt=document.querySelector(".nametxt"),inputFields=document.querySelector(".input-fields"),showAll=document.querySelector(".showAll"),retrievedData=localStorage.getItem("results"),retrievedPokeData=JSON.parse(retrievedData),limit=10;function ac(e){loadMore.style.display="none";var t=localStorage.getItem("results"),a=(retrievedPokeData=JSON.parse(t)).length;datalist.innerHTML="",datalist.style.display="block",l=e.length;for(var o=0;o<a;o++){var s=retrievedPokeData[o].name;if(retrievedPokeData[o].name.toLowerCase().indexOf(e.toLowerCase())>-1){var i=retrievedPokeData[o].url.split("/"),n=i[i.length-2],r=document.createElement("li");r.setAttribute("data-item",n);var c=document.createTextNode(s);r.appendChild(c),datalist.appendChild(r)}}var d=document.getElementById("datalist").getElementsByTagName("li");for(o=0;o<d.length;o++)d[o].addEventListener("click",function(e){searchBynameTxt.value=this.innerText,datalist.style.display="none",clear();var t=this.getAttribute("data-item");t=parseInt(t),seachtext='<li><a href="" onclick=fetchPokemonData('+t+',event)><img class="lozad" data-src="'+("https://pokeres.bastionbot.org/images/pokemon/"+t+".png")+'" src=""/></a><h3>'+this.innerText+" </h3> </li>",listItems.innerHTML=seachtext,lazy()})}function getAllpokemonData(e){e&&fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){var t=e.results;localStorage.setItem("results",JSON.stringify(t));JSON.parse(localStorage.getItem("results"))}).catch(function(e){document.write("Looks like there was a problem: \n",e)})}function clear(){listItems.innerHTML="",detailsList.innerHTML=""}function fetchPokemonData(e,t){loadMore.style.display="none",t.preventDefault();var a=retrievedPokeData[e-1].url;fetch(a).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){displayAbility(e)}).catch(function(e){document.write("Looks like there was a problem: \n",e)})}function pokemonOfDay(e){e&&fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){overlay.style.display="block",detailsList.innerHTML="",totalPokemon=e.results,newInd=Math.floor(100*Math.random()+1);e.results[newInd].name;var t=e.results[newInd].url.split("/"),a=t[t.length-2],o='<li><a href="" onclick=fetchPokemonData('+a+',event)><img class="lozad" data-src="'+("https://pokeres.bastionbot.org/images/pokemon/"+a+".png")+'" src=""/></a></li>';document.querySelector(".pokedata").innerHTML=o,lazy()}).catch(function(e){document.write("Looks like there was a problem: \n",e)})}function createListing(e,t){for(let i=0;i<t;i++){var a=e[i].name,o=e[i].url.split("/"),s=o[o.length-2];displayStr=displayStr+'<li><a href="" onclick=fetchPokemonData('+s+',event)><img class="lozad" data-src="'+("https://pokeres.bastionbot.org/images/pokemon/"+s+".png")+'" src=""/></a><h3>'+a+" </h3> </li>"}listItems.innerHTML=displayStr,lazy()}function displayAbility(e){var t=e.name,a="",o="",s="",i="",n="https://pokeres.bastionbot.org/images/pokemon/"+e.id+".png";for(let t in e.abilities)PokeAb=e.abilities[t].ability.name,a=a+"<p>"+PokeAb+"</p>";for(let t in e.moves)t<=10&&(Pokemoves=e.moves[t].move.name,o=o+"<p>"+Pokemoves+"</p>");for(let t in e.types)Poketype=e.types[t].type.name,s=s+"<p>"+Poketype+"</p>";for(let t in e.stats)stateNum=e.stats[t].base_stat,stateName=e.stats[t].stat.name,i=i+"<p>"+stateName+" : "+stateNum+"</p>";listItems.innerHTML="",detailsList.innerHTML='<div class="img-wrap"><img class="lozad" data-src="'+n+'" src=""/><h3>name :  '+t+' </h3></div><div class="detail-wrap"><div class="pability"><h4 class="accordion">Abilities</h4><div class="desc">'+a+'</div></div><div class="pheight"><h4 class="accordion">Height</h4><div class="desc"><p>'+e.height+' </p></div></div><div class="pType"><h4 class="accordion">Type</h4><div class="desc">'+s+'</div></div><div class="pmove"><h4 class="accordion">Top Moves</h4><div class="desc">'+o+'</div></div><div class="pstat"><h4 class="accordion">Stats</h4><div class="desc">'+i+"</div></div></div>",lazy(),accordian()}function lazy(){lozad(".lozad",{load:function(e){e.src="assets/images/preloader.gif",e.onload=function(){e.src=e.dataset.src,e.classList.add("fade")}}}).observe()}function accordian(){var e,t=document.getElementsByClassName("accordion");for(e=0;e<t.length;e++)t[e].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"})}showAll.onclick=function(){loadMore.style.display="block",displayStr="",detailsList.innerHTML="",createListing(retrievedPokeData,10)},loadMore.onclick=function(){createListing(retrievedPokeData,limit+=10)},window.onload=function(){var e=document.styleSheets[1].ownerNode.getAttribute("href"),t=(new Date).getTime();newStylesheet=e+"?"+t,document.styleSheets[1].ownerNode.setAttribute("href",newStylesheet);var a=document.getElementById("scroll-totop");window.addEventListener("scroll",()=>{window.pageYOffset>=300?a.classList.add("visible"):a.classList.remove("visible")}),a.addEventListener("click",function(){window.scrollTo({top:0,left:0,behaviour:"smooth"})}),getAllpokemonData("https://pokeapi.co/api/v2/pokemon?limit=964")},SupriseBtn.onclick=function(){pokemonOfDay("https://pokeapi.co/api/v2/pokemon?limit=100")},overlay.onclick=function(){this.style.display="none"},(new Darkmode).showWidget();
